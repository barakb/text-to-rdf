# AI Service Configuration
# Required: Your API key for the genai service (Anthropic, OpenAI, Google, etc.)
# For local Ollama: use "ollama" as the key
GENAI_API_KEY=your-api-key-here

# RDF Extraction Model: The LLM used for entity and relation extraction
# Cloud models: claude-3-5-sonnet, gpt-4o, gemini-1.5-pro
# Local models (Ollama): llama3.3:8b, mistral, mixtral, qwen2.5:7b
RDF_EXTRACTION_MODEL=claude-3-5-sonnet

# Optional: Temperature for generation (0.0 - 1.0, default: 0.3)
# Lower values = more deterministic, Higher values = more creative
GENAI_TEMPERATURE=0.3

# Optional: Maximum tokens in response (default: 4096)
GENAI_MAX_TOKENS=4096

# Optional: Custom system prompt (overrides default)
# GENAI_SYSTEM_PROMPT="You are an expert RDF extraction system..."

# Optional: Comma-separated list of ontology namespaces (default: https://schema.org/)
# RDF_ONTOLOGIES=https://schema.org/,http://www.w3.org/2006/time#

# ============================================
# Entity Linking Configuration (Phase 3)
# ============================================
# Enable entity linking to canonical URIs (Wikidata/DBpedia)
# This maps entity names to globally unique URIs for better consistency
ENTITY_LINKING_ENABLED=false

# Linking strategy: local, dbpedia, wikidata, none (default: none)
# - local: Use local Oxigraph RDF store (requires ENTITY_LINKING_KB_PATH)
# - dbpedia: Use DBpedia Spotlight API (requires internet)
# - wikidata: Use Wikidata API (stub - not yet implemented)
ENTITY_LINKING_STRATEGY=none

# DBpedia Spotlight service URL (default: https://api.dbpedia-spotlight.org/en)
ENTITY_LINKING_SERVICE_URL=https://api.dbpedia-spotlight.org/en

# Minimum confidence threshold for entity linking 0.0-1.0 (default: 0.5)
# Higher = fewer but more accurate links
ENTITY_LINKING_CONFIDENCE=0.5

# Path to local RDF knowledge base (required for 'local' strategy)
# ENTITY_LINKING_KB_PATH=/path/to/wikidata.db

# Enable debug logging for entity linking (default: not set)
# Set to "1" to see entity→URI mappings during extraction
# DEBUG_ENTITY_LINKING=1

# ============================================
# Coreference Resolution (Phase 2)
# ============================================
# Strategy for pronoun resolution: none, rule-based, gliner-guided (default: rule-based)
# - none: Disabled (pass-through, for backward compatibility)
# - rule-based: Fast heuristics (~1ms/chunk, no dependencies) - RECOMMENDED
# - gliner-guided: Use GLiNER for entity-guided resolution (~50ms/chunk, requires gliner feature)
COREF_STRATEGY=rule-based

# Preserve original text in metadata (default: true)
COREF_PRESERVE_ORIGINAL=true

# Maximum sentence distance to look back for antecedents (default: 3)
# Higher values = more context, but may introduce incorrect matches
COREF_MAX_DISTANCE=3

# Minimum confidence for entity matches (default: 0.7)
# Range: 0.0-1.0. Higher = fewer but more accurate matches
COREF_MIN_CONFIDENCE=0.7

# Enable debug logging for coreference resolution (default: not set)
# Set to "1" to see pronoun→entity mappings during extraction
# DEBUG_COREF=1

# ============================================
# Quick Setup for Local Testing with Ollama
# ============================================
# 1. Install: curl -fsSL https://ollama.ai/install.sh | sh
# 2. Start: ollama serve
# 3. Pull model: ollama pull llama3.3:8b
# 4. Use these settings:
#    GENAI_API_KEY=ollama
#    RDF_EXTRACTION_MODEL=llama3.3:8b
# Or simply: cp .env.ollama .env

